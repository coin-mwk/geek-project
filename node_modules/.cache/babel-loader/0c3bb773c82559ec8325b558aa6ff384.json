{"ast":null,"code":"// 存放有关login的action\nimport request from '@/utils/request';\nimport { setTokenInfo, removeTokenInfo } from '@/utils/storage'; // 发送短信验证码\n\nexport const sendValidationCode = mobile => {\n  return async dispatch => {\n    const res = await request.get(`/sms/codes/${mobile}`);\n  };\n};\n/**\n * 登录验证\n * @param {*} data \n * @returns \n */\n\nexport const login = data => {\n  return async dispatch => {\n    const res = await request({\n      method: 'post',\n      url: '/authorizations',\n      data\n    }); // 保存token到redux中\n\n    dispatch(saveToken(res.data)); // 保存token到本地\n\n    setTokenInfo(res.data);\n  };\n};\n/**\n * 保存token\n * @param {*} payload \n * @returns \n */\n\nexport const saveToken = payload => {\n  return {\n    type: 'login/token',\n    payload\n  };\n};\n/**\n * 个人信息中退出登录\n * @returns \n */\n\nexport const logout = () => {\n  return dispatch => {\n    // 移除本地token\n    removeTokenInfo(); // 移除redux中的token\n\n    dispatch({\n      type: 'login/logout'\n    });\n  };\n};","map":{"version":3,"names":["request","setTokenInfo","removeTokenInfo","sendValidationCode","mobile","dispatch","res","get","login","data","method","url","saveToken","payload","type","logout"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/src/store/actions/login.js"],"sourcesContent":["// 存放有关login的action\nimport request from '@/utils/request'\nimport { setTokenInfo, removeTokenInfo } from '@/utils/storage';\n\n// 发送短信验证码\nexport const sendValidationCode = mobile=>{\n    return async (dispatch)=>{\n        const res = await request.get(`/sms/codes/${mobile}`);\n    }\n}\n\n/**\n * 登录验证\n * @param {*} data \n * @returns \n */\nexport const login = (data)=>{\n    return async(dispatch)=>{\n        const res = await request({\n            method:'post',\n            url:'/authorizations',\n            data\n        })\n        // 保存token到redux中\n        dispatch(saveToken(res.data))\n        // 保存token到本地\n        setTokenInfo(res.data)\n    }\n}\n/**\n * 保存token\n * @param {*} payload \n * @returns \n */\nexport const saveToken = (payload)=>{\n    return {\n        type:'login/token',\n        payload,\n    }\n}\n\n/**\n * 个人信息中退出登录\n * @returns \n */\n export const logout = ()=>{\n    return dispatch =>{\n        // 移除本地token\n        removeTokenInfo();\n        // 移除redux中的token\n        dispatch({\n            type:'login/logout'\n        });\n    }\n}"],"mappings":"AAAA;AACA,OAAOA,OAAP,MAAoB,iBAApB;AACA,SAASC,YAAT,EAAuBC,eAAvB,QAA8C,iBAA9C,C,CAEA;;AACA,OAAO,MAAMC,kBAAkB,GAAGC,MAAM,IAAE;EACtC,OAAO,MAAOC,QAAP,IAAkB;IACrB,MAAMC,GAAG,GAAG,MAAMN,OAAO,CAACO,GAAR,CAAa,cAAaH,MAAO,EAAjC,CAAlB;EACH,CAFD;AAGH,CAJM;AAMP;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMI,KAAK,GAAIC,IAAD,IAAQ;EACzB,OAAO,MAAMJ,QAAN,IAAiB;IACpB,MAAMC,GAAG,GAAG,MAAMN,OAAO,CAAC;MACtBU,MAAM,EAAC,MADe;MAEtBC,GAAG,EAAC,iBAFkB;MAGtBF;IAHsB,CAAD,CAAzB,CADoB,CAMpB;;IACAJ,QAAQ,CAACO,SAAS,CAACN,GAAG,CAACG,IAAL,CAAV,CAAR,CAPoB,CAQpB;;IACAR,YAAY,CAACK,GAAG,CAACG,IAAL,CAAZ;EACH,CAVD;AAWH,CAZM;AAaP;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMG,SAAS,GAAIC,OAAD,IAAW;EAChC,OAAO;IACHC,IAAI,EAAC,aADF;IAEHD;EAFG,CAAP;AAIH,CALM;AAOP;AACA;AACA;AACA;;AACC,OAAO,MAAME,MAAM,GAAG,MAAI;EACvB,OAAOV,QAAQ,IAAG;IACd;IACAH,eAAe,GAFD,CAGd;;IACAG,QAAQ,CAAC;MACLS,IAAI,EAAC;IADA,CAAD,CAAR;EAGH,CAPD;AAQH,CATO"},"metadata":{},"sourceType":"module"}