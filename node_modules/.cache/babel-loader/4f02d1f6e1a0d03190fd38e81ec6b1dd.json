{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Dialog from './Dialog';\n\nfunction noop() {}\n\nvar IS_REACT_16 = !!ReactDOM.createPortal;\nvar CAN_USE_DOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\nvar DialogWrap = function (_React$Component) {\n  _inherits(DialogWrap, _React$Component);\n\n  function DialogWrap() {\n    _classCallCheck(this, DialogWrap);\n\n    var _this = _possibleConstructorReturn(this, (DialogWrap.__proto__ || Object.getPrototypeOf(DialogWrap)).apply(this, arguments));\n\n    _this.saveRef = function (node) {\n      if (IS_REACT_16) {\n        _this._component = node;\n      }\n    };\n\n    _this.getComponent = function (visible) {\n      var props = _extends({}, _this.props);\n\n      ['visible', 'onAnimateLeave'].forEach(function (key) {\n        if (props.hasOwnProperty(key)) {\n          delete props[key];\n        }\n      });\n      return React.createElement(Dialog, _extends({}, props, {\n        visible: visible,\n        onAnimateLeave: _this.removeContainer,\n        ref: _this.saveRef\n      }));\n    };\n\n    _this.removeContainer = function () {\n      if (_this.container) {\n        if (!IS_REACT_16) {\n          ReactDOM.unmountComponentAtNode(_this.container);\n        }\n\n        _this.container.parentNode.removeChild(_this.container);\n\n        _this.container = null;\n      }\n    };\n\n    _this.getContainer = function () {\n      if (!_this.container) {\n        var container = document.createElement('div');\n        var containerId = _this.props.prefixCls + '-container-' + new Date().getTime();\n        container.setAttribute('id', containerId);\n        document.body.appendChild(container);\n        _this.container = container;\n      }\n\n      return _this.container;\n    };\n\n    return _this;\n  }\n\n  _createClass(DialogWrap, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.visible) {\n        this.componentDidUpdate();\n      }\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(_ref) {\n      var visible = _ref.visible;\n      return !!(this.props.visible || visible);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.props.visible) {\n        if (!IS_REACT_16) {\n          this.renderDialog(false);\n        } else {\n          // TODO for react@16 createPortal animation\n          this.removeContainer();\n        }\n      } else {\n        this.removeContainer();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (!IS_REACT_16) {\n        this.renderDialog(this.props.visible);\n      }\n    }\n  }, {\n    key: 'renderDialog',\n    value: function renderDialog(visible) {\n      ReactDOM.unstable_renderSubtreeIntoContainer(this, this.getComponent(visible), this.getContainer());\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!CAN_USE_DOM) {\n        return null;\n      }\n\n      var visible = this.props.visible;\n\n      if (IS_REACT_16 && (visible || this._component)) {\n        return ReactDOM.createPortal(this.getComponent(visible), this.getContainer());\n      }\n\n      return null;\n    }\n  }]);\n\n  return DialogWrap;\n}(React.Component);\n\nexport default DialogWrap;\nDialogWrap.defaultProps = {\n  visible: false,\n  prefixCls: 'rmc-dialog',\n  onClose: noop\n};","map":{"version":3,"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","ReactDOM","Dialog","noop","IS_REACT_16","createPortal","CAN_USE_DOM","window","document","createElement","DialogWrap","_React$Component","_this","__proto__","Object","getPrototypeOf","apply","arguments","saveRef","node","_component","getComponent","visible","props","forEach","key","hasOwnProperty","onAnimateLeave","removeContainer","ref","container","unmountComponentAtNode","parentNode","removeChild","getContainer","containerId","prefixCls","Date","getTime","setAttribute","body","appendChild","value","componentDidMount","componentDidUpdate","shouldComponentUpdate","_ref","componentWillUnmount","renderDialog","unstable_renderSubtreeIntoContainer","render","Component","defaultProps","onClose"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/node_modules/rmc-dialog/es/DialogWrap.js"],"sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Dialog from './Dialog';\nfunction noop() {}\nvar IS_REACT_16 = !!ReactDOM.createPortal;\nvar CAN_USE_DOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\nvar DialogWrap = function (_React$Component) {\n    _inherits(DialogWrap, _React$Component);\n\n    function DialogWrap() {\n        _classCallCheck(this, DialogWrap);\n\n        var _this = _possibleConstructorReturn(this, (DialogWrap.__proto__ || Object.getPrototypeOf(DialogWrap)).apply(this, arguments));\n\n        _this.saveRef = function (node) {\n            if (IS_REACT_16) {\n                _this._component = node;\n            }\n        };\n        _this.getComponent = function (visible) {\n            var props = _extends({}, _this.props);\n            ['visible', 'onAnimateLeave'].forEach(function (key) {\n                if (props.hasOwnProperty(key)) {\n                    delete props[key];\n                }\n            });\n            return React.createElement(Dialog, _extends({}, props, { visible: visible, onAnimateLeave: _this.removeContainer, ref: _this.saveRef }));\n        };\n        _this.removeContainer = function () {\n            if (_this.container) {\n                if (!IS_REACT_16) {\n                    ReactDOM.unmountComponentAtNode(_this.container);\n                }\n                _this.container.parentNode.removeChild(_this.container);\n                _this.container = null;\n            }\n        };\n        _this.getContainer = function () {\n            if (!_this.container) {\n                var container = document.createElement('div');\n                var containerId = _this.props.prefixCls + '-container-' + new Date().getTime();\n                container.setAttribute('id', containerId);\n                document.body.appendChild(container);\n                _this.container = container;\n            }\n            return _this.container;\n        };\n        return _this;\n    }\n\n    _createClass(DialogWrap, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (this.props.visible) {\n                this.componentDidUpdate();\n            }\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref) {\n            var visible = _ref.visible;\n\n            return !!(this.props.visible || visible);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.props.visible) {\n                if (!IS_REACT_16) {\n                    this.renderDialog(false);\n                } else {\n                    // TODO for react@16 createPortal animation\n                    this.removeContainer();\n                }\n            } else {\n                this.removeContainer();\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            if (!IS_REACT_16) {\n                this.renderDialog(this.props.visible);\n            }\n        }\n    }, {\n        key: 'renderDialog',\n        value: function renderDialog(visible) {\n            ReactDOM.unstable_renderSubtreeIntoContainer(this, this.getComponent(visible), this.getContainer());\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!CAN_USE_DOM) {\n                return null;\n            }\n            var visible = this.props.visible;\n\n            if (IS_REACT_16 && (visible || this._component)) {\n                return ReactDOM.createPortal(this.getComponent(visible), this.getContainer());\n            }\n            return null;\n        }\n    }]);\n\n    return DialogWrap;\n}(React.Component);\n\nexport default DialogWrap;\n\nDialogWrap.defaultProps = {\n    visible: false,\n    prefixCls: 'rmc-dialog',\n    onClose: noop\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}