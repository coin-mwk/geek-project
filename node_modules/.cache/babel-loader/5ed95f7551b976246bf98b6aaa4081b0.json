{"ast":null,"code":"import { Globals } from '@react-spring/web';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\nlet reduced = false;\nconst subscribers = new Set();\n\nfunction notify() {\n  subscribers.forEach(subscriber => {\n    subscriber();\n  });\n}\n\nexport function reduceMotion() {\n  reduced = true;\n  notify();\n  Globals.assign({\n    skipAnimation: true\n  });\n}\nexport function restoreMotion() {\n  reduced = false;\n  notify();\n  Globals.assign({\n    skipAnimation: false\n  });\n}\nexport function isMotionReduced() {\n  return reduced;\n}\nexport function useMotionReduced() {\n  return useSyncExternalStore(onStoreChange => {\n    subscribers.add(onStoreChange);\n    return () => {\n      subscribers.delete(onStoreChange);\n    };\n  }, isMotionReduced);\n}","map":{"version":3,"names":["Globals","useSyncExternalStore","reduced","subscribers","Set","notify","forEach","subscriber","reduceMotion","assign","skipAnimation","restoreMotion","isMotionReduced","useMotionReduced","onStoreChange","add","delete"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/node_modules/antd-mobile/es/utils/reduce-and-restore-motion.js"],"sourcesContent":["import { Globals } from '@react-spring/web';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\nlet reduced = false;\nconst subscribers = new Set();\n\nfunction notify() {\n  subscribers.forEach(subscriber => {\n    subscriber();\n  });\n}\n\nexport function reduceMotion() {\n  reduced = true;\n  notify();\n  Globals.assign({\n    skipAnimation: true\n  });\n}\nexport function restoreMotion() {\n  reduced = false;\n  notify();\n  Globals.assign({\n    skipAnimation: false\n  });\n}\nexport function isMotionReduced() {\n  return reduced;\n}\nexport function useMotionReduced() {\n  return useSyncExternalStore(onStoreChange => {\n    subscribers.add(onStoreChange);\n    return () => {\n      subscribers.delete(onStoreChange);\n    };\n  }, isMotionReduced);\n}"],"mappings":"AAAA,SAASA,OAAT,QAAwB,mBAAxB;AACA,SAASC,oBAAT,QAAqC,8BAArC;AACA,IAAIC,OAAO,GAAG,KAAd;AACA,MAAMC,WAAW,GAAG,IAAIC,GAAJ,EAApB;;AAEA,SAASC,MAAT,GAAkB;EAChBF,WAAW,CAACG,OAAZ,CAAoBC,UAAU,IAAI;IAChCA,UAAU;EACX,CAFD;AAGD;;AAED,OAAO,SAASC,YAAT,GAAwB;EAC7BN,OAAO,GAAG,IAAV;EACAG,MAAM;EACNL,OAAO,CAACS,MAAR,CAAe;IACbC,aAAa,EAAE;EADF,CAAf;AAGD;AACD,OAAO,SAASC,aAAT,GAAyB;EAC9BT,OAAO,GAAG,KAAV;EACAG,MAAM;EACNL,OAAO,CAACS,MAAR,CAAe;IACbC,aAAa,EAAE;EADF,CAAf;AAGD;AACD,OAAO,SAASE,eAAT,GAA2B;EAChC,OAAOV,OAAP;AACD;AACD,OAAO,SAASW,gBAAT,GAA4B;EACjC,OAAOZ,oBAAoB,CAACa,aAAa,IAAI;IAC3CX,WAAW,CAACY,GAAZ,CAAgBD,aAAhB;IACA,OAAO,MAAM;MACXX,WAAW,CAACa,MAAZ,CAAmBF,aAAnB;IACD,CAFD;EAGD,CAL0B,EAKxBF,eALwB,CAA3B;AAMD"},"metadata":{},"sourceType":"module"}