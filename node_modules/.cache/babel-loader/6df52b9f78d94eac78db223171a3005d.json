{"ast":null,"code":"import React, { useRef, useState } from 'react';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useIsomorphicLayoutEffect, useUnmountedRef } from 'ahooks';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useInnerVisible } from '../../utils/use-inner-visible';\nimport classNames from 'classnames';\nimport { withNativeProps } from '../../utils/native-props';\nimport { ShouldRender } from '../../utils/should-render';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { CloseOutline } from 'antd-mobile-icons';\nimport { defaultPopupBaseProps } from '../popup/popup-base-props';\nconst defaultProps = Object.assign(Object.assign({}, defaultPopupBaseProps), {\n  getContainer: null\n});\nexport const CenterPopup = p => {\n  const props = mergeProps(defaultProps, p);\n  const unmountedRef = useUnmountedRef();\n  const style = useSpring({\n    scale: props.visible ? 1 : 0.8,\n    opacity: props.visible ? 1 : 0,\n    config: {\n      mass: 1.2,\n      tension: 200,\n      friction: 25,\n      clamp: true\n    },\n    onRest: () => {\n      var _a, _b;\n\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const [active, setActive] = useState(props.visible);\n  useIsomorphicLayoutEffect(() => {\n    if (props.visible) {\n      setActive(true);\n    }\n  }, [props.visible]);\n  const ref = useRef(null);\n  useLockScroll(ref, props.disableBodyScroll && active);\n  const maskVisible = useInnerVisible(active && props.visible);\n  const body = React.createElement(\"div\", {\n    className: classNames('adm-center-popup-body', props.bodyClassName),\n    style: props.bodyStyle\n  }, props.children);\n  const node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(\"div\", {\n    className: 'adm-center-popup',\n    style: {\n      display: active ? undefined : 'none',\n      pointerEvents: active ? undefined : 'none'\n    }\n  }, props.mask && React.createElement(Mask, {\n    visible: maskVisible,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose,\n    onMaskClick: e => {\n      var _a, _b;\n\n      (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n\n      if (props.closeOnMaskClick) {\n        (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    },\n    style: props.maskStyle,\n    className: classNames('adm-center-popup-mask', props.maskClassName),\n    disableBodyScroll: false,\n    stopPropagation: props.stopPropagation\n  }), React.createElement(\"div\", {\n    className: 'adm-center-popup-wrap',\n    role: props.role,\n    \"aria-label\": props['aria-label']\n  }, React.createElement(animated.div, {\n    style: style,\n    ref: ref\n  }, props.showCloseButton && React.createElement(\"a\", {\n    className: classNames('adm-center-popup-close', 'adm-plain-anchor'),\n    onClick: () => {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n  }, React.createElement(CloseOutline, null)), body)))));\n  return React.createElement(ShouldRender, {\n    active: active,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose\n  }, renderToContainer(props.getContainer, node));\n};","map":{"version":3,"names":["React","useRef","useState","renderToContainer","Mask","withStopPropagation","mergeProps","useIsomorphicLayoutEffect","useUnmountedRef","animated","useSpring","useInnerVisible","classNames","withNativeProps","ShouldRender","useLockScroll","CloseOutline","defaultPopupBaseProps","defaultProps","Object","assign","getContainer","CenterPopup","p","props","unmountedRef","style","scale","visible","opacity","config","mass","tension","friction","clamp","onRest","_a","_b","current","setActive","afterShow","call","afterClose","active","ref","disableBodyScroll","maskVisible","body","createElement","className","bodyClassName","bodyStyle","children","node","stopPropagation","display","undefined","pointerEvents","mask","forceRender","destroyOnClose","onMaskClick","e","closeOnMaskClick","onClose","maskStyle","maskClassName","role","div","showCloseButton","onClick"],"sources":["/Users/tonystark/code/VSCodeProject/react/未命名文件夹/gk-h5/node_modules/antd-mobile/es/components/center-popup/center-popup.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useIsomorphicLayoutEffect, useUnmountedRef } from 'ahooks';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useInnerVisible } from '../../utils/use-inner-visible';\nimport classNames from 'classnames';\nimport { withNativeProps } from '../../utils/native-props';\nimport { ShouldRender } from '../../utils/should-render';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { CloseOutline } from 'antd-mobile-icons';\nimport { defaultPopupBaseProps } from '../popup/popup-base-props';\nconst defaultProps = Object.assign(Object.assign({}, defaultPopupBaseProps), {\n  getContainer: null\n});\nexport const CenterPopup = p => {\n  const props = mergeProps(defaultProps, p);\n  const unmountedRef = useUnmountedRef();\n  const style = useSpring({\n    scale: props.visible ? 1 : 0.8,\n    opacity: props.visible ? 1 : 0,\n    config: {\n      mass: 1.2,\n      tension: 200,\n      friction: 25,\n      clamp: true\n    },\n    onRest: () => {\n      var _a, _b;\n\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const [active, setActive] = useState(props.visible);\n  useIsomorphicLayoutEffect(() => {\n    if (props.visible) {\n      setActive(true);\n    }\n  }, [props.visible]);\n  const ref = useRef(null);\n  useLockScroll(ref, props.disableBodyScroll && active);\n  const maskVisible = useInnerVisible(active && props.visible);\n  const body = React.createElement(\"div\", {\n    className: classNames('adm-center-popup-body', props.bodyClassName),\n    style: props.bodyStyle\n  }, props.children);\n  const node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(\"div\", {\n    className: 'adm-center-popup',\n    style: {\n      display: active ? undefined : 'none',\n      pointerEvents: active ? undefined : 'none'\n    }\n  }, props.mask && React.createElement(Mask, {\n    visible: maskVisible,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose,\n    onMaskClick: e => {\n      var _a, _b;\n\n      (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n\n      if (props.closeOnMaskClick) {\n        (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    },\n    style: props.maskStyle,\n    className: classNames('adm-center-popup-mask', props.maskClassName),\n    disableBodyScroll: false,\n    stopPropagation: props.stopPropagation\n  }), React.createElement(\"div\", {\n    className: 'adm-center-popup-wrap',\n    role: props.role,\n    \"aria-label\": props['aria-label']\n  }, React.createElement(animated.div, {\n    style: style,\n    ref: ref\n  }, props.showCloseButton && React.createElement(\"a\", {\n    className: classNames('adm-center-popup-close', 'adm-plain-anchor'),\n    onClick: () => {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n  }, React.createElement(CloseOutline, null)), body)))));\n  return React.createElement(ShouldRender, {\n    active: active,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose\n  }, renderToContainer(props.getContainer, node));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}