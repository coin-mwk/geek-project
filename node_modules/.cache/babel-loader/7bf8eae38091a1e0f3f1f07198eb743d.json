{"ast":null,"code":"import { useSpring } from '@react-spring/web';\nimport { useMutationEffect } from './use-mutation-effect';\nimport { bound } from './bound';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nimport { useIsomorphicUpdateLayoutEffect } from './use-isomorphic-update-layout-effect';\nexport const useTabListScroll = (targetRef, activeIndex) => {\n  const [{\n    scrollLeft\n  }, api] = useSpring(() => ({\n    scrollLeft: 0,\n    config: {\n      tension: 300,\n      clamp: true\n    }\n  }));\n\n  function animate() {\n    let immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    const container = targetRef.current;\n    if (!container) return;\n    if (activeIndex === undefined) return;\n    const activeTabWrapper = container.children.item(activeIndex);\n    const activeTab = activeTabWrapper.children.item(0);\n    const activeTabLeft = activeTab.offsetLeft;\n    const activeTabWidth = activeTab.offsetWidth;\n    const containerWidth = container.offsetWidth;\n    const containerScrollWidth = container.scrollWidth;\n    const containerScrollLeft = container.scrollLeft;\n    const maxScrollDistance = containerScrollWidth - containerWidth;\n    if (maxScrollDistance <= 0) return;\n    const nextScrollLeft = bound(activeTabLeft - (containerWidth - activeTabWidth) / 2, 0, containerScrollWidth - containerWidth);\n    api.start({\n      scrollLeft: nextScrollLeft,\n      from: {\n        scrollLeft: containerScrollLeft\n      },\n      immediate: immediate && !scrollLeft.isAnimating\n    });\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    animate(true);\n  }, []);\n  useIsomorphicUpdateLayoutEffect(() => {\n    animate();\n  }, [activeIndex]);\n  useMutationEffect(() => {\n    animate(true);\n  }, targetRef, {\n    subtree: true,\n    childList: true,\n    characterData: true\n  });\n  return {\n    scrollLeft,\n    animate\n  };\n};","map":{"version":3,"names":["useSpring","useMutationEffect","bound","useIsomorphicLayoutEffect","useIsomorphicUpdateLayoutEffect","useTabListScroll","targetRef","activeIndex","scrollLeft","api","config","tension","clamp","animate","immediate","container","current","undefined","activeTabWrapper","children","item","activeTab","activeTabLeft","offsetLeft","activeTabWidth","offsetWidth","containerWidth","containerScrollWidth","scrollWidth","containerScrollLeft","maxScrollDistance","nextScrollLeft","start","from","isAnimating","subtree","childList","characterData"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/node_modules/antd-mobile/es/utils/use-tab-list-scroll.js"],"sourcesContent":["import { useSpring } from '@react-spring/web';\nimport { useMutationEffect } from './use-mutation-effect';\nimport { bound } from './bound';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nimport { useIsomorphicUpdateLayoutEffect } from './use-isomorphic-update-layout-effect';\nexport const useTabListScroll = (targetRef, activeIndex) => {\n  const [{\n    scrollLeft\n  }, api] = useSpring(() => ({\n    scrollLeft: 0,\n    config: {\n      tension: 300,\n      clamp: true\n    }\n  }));\n  function animate(immediate = false) {\n    const container = targetRef.current;\n    if (!container) return;\n    if (activeIndex === undefined) return;\n    const activeTabWrapper = container.children.item(activeIndex);\n    const activeTab = activeTabWrapper.children.item(0);\n    const activeTabLeft = activeTab.offsetLeft;\n    const activeTabWidth = activeTab.offsetWidth;\n    const containerWidth = container.offsetWidth;\n    const containerScrollWidth = container.scrollWidth;\n    const containerScrollLeft = container.scrollLeft;\n    const maxScrollDistance = containerScrollWidth - containerWidth;\n    if (maxScrollDistance <= 0) return;\n    const nextScrollLeft = bound(activeTabLeft - (containerWidth - activeTabWidth) / 2, 0, containerScrollWidth - containerWidth);\n    api.start({\n      scrollLeft: nextScrollLeft,\n      from: {\n        scrollLeft: containerScrollLeft\n      },\n      immediate: immediate && !scrollLeft.isAnimating\n    });\n  }\n  useIsomorphicLayoutEffect(() => {\n    animate(true);\n  }, []);\n  useIsomorphicUpdateLayoutEffect(() => {\n    animate();\n  }, [activeIndex]);\n  useMutationEffect(() => {\n    animate(true);\n  }, targetRef, {\n    subtree: true,\n    childList: true,\n    characterData: true\n  });\n  return {\n    scrollLeft,\n    animate\n  };\n};"],"mappings":"AAAA,SAASA,SAAT,QAA0B,mBAA1B;AACA,SAASC,iBAAT,QAAkC,uBAAlC;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,yBAAT,QAA0C,QAA1C;AACA,SAASC,+BAAT,QAAgD,uCAAhD;AACA,OAAO,MAAMC,gBAAgB,GAAG,CAACC,SAAD,EAAYC,WAAZ,KAA4B;EAC1D,MAAM,CAAC;IACLC;EADK,CAAD,EAEHC,GAFG,IAEIT,SAAS,CAAC,OAAO;IACzBQ,UAAU,EAAE,CADa;IAEzBE,MAAM,EAAE;MACNC,OAAO,EAAE,GADH;MAENC,KAAK,EAAE;IAFD;EAFiB,CAAP,CAAD,CAFnB;;EASA,SAASC,OAAT,GAAoC;IAAA,IAAnBC,SAAmB,uEAAP,KAAO;IAClC,MAAMC,SAAS,GAAGT,SAAS,CAACU,OAA5B;IACA,IAAI,CAACD,SAAL,EAAgB;IAChB,IAAIR,WAAW,KAAKU,SAApB,EAA+B;IAC/B,MAAMC,gBAAgB,GAAGH,SAAS,CAACI,QAAV,CAAmBC,IAAnB,CAAwBb,WAAxB,CAAzB;IACA,MAAMc,SAAS,GAAGH,gBAAgB,CAACC,QAAjB,CAA0BC,IAA1B,CAA+B,CAA/B,CAAlB;IACA,MAAME,aAAa,GAAGD,SAAS,CAACE,UAAhC;IACA,MAAMC,cAAc,GAAGH,SAAS,CAACI,WAAjC;IACA,MAAMC,cAAc,GAAGX,SAAS,CAACU,WAAjC;IACA,MAAME,oBAAoB,GAAGZ,SAAS,CAACa,WAAvC;IACA,MAAMC,mBAAmB,GAAGd,SAAS,CAACP,UAAtC;IACA,MAAMsB,iBAAiB,GAAGH,oBAAoB,GAAGD,cAAjD;IACA,IAAII,iBAAiB,IAAI,CAAzB,EAA4B;IAC5B,MAAMC,cAAc,GAAG7B,KAAK,CAACoB,aAAa,GAAG,CAACI,cAAc,GAAGF,cAAlB,IAAoC,CAArD,EAAwD,CAAxD,EAA2DG,oBAAoB,GAAGD,cAAlF,CAA5B;IACAjB,GAAG,CAACuB,KAAJ,CAAU;MACRxB,UAAU,EAAEuB,cADJ;MAERE,IAAI,EAAE;QACJzB,UAAU,EAAEqB;MADR,CAFE;MAKRf,SAAS,EAAEA,SAAS,IAAI,CAACN,UAAU,CAAC0B;IAL5B,CAAV;EAOD;;EACD/B,yBAAyB,CAAC,MAAM;IAC9BU,OAAO,CAAC,IAAD,CAAP;EACD,CAFwB,EAEtB,EAFsB,CAAzB;EAGAT,+BAA+B,CAAC,MAAM;IACpCS,OAAO;EACR,CAF8B,EAE5B,CAACN,WAAD,CAF4B,CAA/B;EAGAN,iBAAiB,CAAC,MAAM;IACtBY,OAAO,CAAC,IAAD,CAAP;EACD,CAFgB,EAEdP,SAFc,EAEH;IACZ6B,OAAO,EAAE,IADG;IAEZC,SAAS,EAAE,IAFC;IAGZC,aAAa,EAAE;EAHH,CAFG,CAAjB;EAOA,OAAO;IACL7B,UADK;IAELK;EAFK,CAAP;AAID,CAjDM"},"metadata":{},"sourceType":"module"}