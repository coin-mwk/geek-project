{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport classNames from 'classnames';\nimport React, { useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SpinIcon } from './spin-icon';\nimport { useConfig } from '../config-provider';\nimport { isPromise } from '../../utils/validate';\nconst classPrefix = `adm-switch`;\nconst defaultProps = {\n  defaultChecked: false\n};\nexport const Switch = p => {\n  const props = mergeProps(defaultProps, p);\n  const disabled = props.disabled || props.loading || false;\n  const [changing, setChanging] = useState(false);\n  const {\n    locale\n  } = useConfig();\n  const [checked, setChecked] = usePropsValue({\n    value: props.checked,\n    defaultValue: props.defaultChecked,\n    onChange: props.onChange\n  });\n\n  function onClick() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (disabled || props.loading || changing) {\n        return;\n      }\n\n      const nextChecked = !checked;\n\n      if (props.beforeChange) {\n        setChanging(true);\n\n        try {\n          yield props.beforeChange(nextChecked);\n          setChanging(false);\n        } catch (e) {\n          setChanging(false);\n          throw e;\n        }\n      }\n\n      const result = setChecked(nextChecked);\n\n      if (isPromise(result)) {\n        setChanging(true);\n\n        try {\n          yield result;\n          setChanging(false);\n        } catch (e) {\n          setChanging(false);\n          throw e;\n        }\n      }\n    });\n  }\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    onClick: onClick,\n    className: classNames(classPrefix, {\n      [`${classPrefix}-checked`]: checked,\n      [`${classPrefix}-disabled`]: disabled || changing\n    }),\n    role: 'switch',\n    \"aria-label\": locale.Switch.name,\n    \"aria-checked\": checked,\n    \"aria-disabled\": disabled\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-checkbox`\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-handle`\n  }, (props.loading || changing) && React.createElement(SpinIcon, {\n    className: `${classPrefix}-spin-icon`\n  })), React.createElement(\"div\", {\n    className: `${classPrefix}-inner`\n  }, checked ? props.checkedText : props.uncheckedText))));\n};","map":{"version":3,"names":["__awaiter","classNames","React","useState","withNativeProps","usePropsValue","mergeProps","SpinIcon","useConfig","isPromise","classPrefix","defaultProps","defaultChecked","Switch","p","props","disabled","loading","changing","setChanging","locale","checked","setChecked","value","defaultValue","onChange","onClick","nextChecked","beforeChange","e","result","createElement","className","role","name","checkedText","uncheckedText"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/node_modules/antd-mobile/es/components/switch/switch.js"],"sourcesContent":["import { __awaiter } from \"tslib\";\nimport classNames from 'classnames';\nimport React, { useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SpinIcon } from './spin-icon';\nimport { useConfig } from '../config-provider';\nimport { isPromise } from '../../utils/validate';\nconst classPrefix = `adm-switch`;\nconst defaultProps = {\n  defaultChecked: false\n};\nexport const Switch = p => {\n  const props = mergeProps(defaultProps, p);\n  const disabled = props.disabled || props.loading || false;\n  const [changing, setChanging] = useState(false);\n  const {\n    locale\n  } = useConfig();\n  const [checked, setChecked] = usePropsValue({\n    value: props.checked,\n    defaultValue: props.defaultChecked,\n    onChange: props.onChange\n  });\n\n  function onClick() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (disabled || props.loading || changing) {\n        return;\n      }\n\n      const nextChecked = !checked;\n\n      if (props.beforeChange) {\n        setChanging(true);\n\n        try {\n          yield props.beforeChange(nextChecked);\n          setChanging(false);\n        } catch (e) {\n          setChanging(false);\n          throw e;\n        }\n      }\n\n      const result = setChecked(nextChecked);\n\n      if (isPromise(result)) {\n        setChanging(true);\n\n        try {\n          yield result;\n          setChanging(false);\n        } catch (e) {\n          setChanging(false);\n          throw e;\n        }\n      }\n    });\n  }\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    onClick: onClick,\n    className: classNames(classPrefix, {\n      [`${classPrefix}-checked`]: checked,\n      [`${classPrefix}-disabled`]: disabled || changing\n    }),\n    role: 'switch',\n    \"aria-label\": locale.Switch.name,\n    \"aria-checked\": checked,\n    \"aria-disabled\": disabled\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-checkbox`\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-handle`\n  }, (props.loading || changing) && React.createElement(SpinIcon, {\n    className: `${classPrefix}-spin-icon`\n  })), React.createElement(\"div\", {\n    className: `${classPrefix}-inner`\n  }, checked ? props.checkedText : props.uncheckedText))));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}