{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n/*\n * https://github.com/jasonslyvia/react-marquee\n * remove PC\n * support React Element for text prop\n*/\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nvar Marquee = function (_React$Component) {\n  _inherits(Marquee, _React$Component);\n\n  function Marquee() {\n    _classCallCheck(this, Marquee);\n\n    var _this = _possibleConstructorReturn(this, (Marquee.__proto__ || Object.getPrototypeOf(Marquee)).apply(this, arguments));\n\n    _this.state = {\n      animatedWidth: 0,\n      overflowWidth: 0\n    };\n    return _this;\n  }\n\n  _createClass(Marquee, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this._measureText();\n\n      this._startAnimation();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this._measureText();\n\n      if (!this._marqueeTimer) {\n        this._startAnimation();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this._marqueeTimer);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          className = _props.className,\n          text = _props.text;\n\n      var style = _extends({\n        position: 'relative',\n        right: this.state.animatedWidth,\n        whiteSpace: 'nowrap',\n        display: 'inline-block'\n      }, this.props.style);\n\n      return React.createElement('div', {\n        className: prefixCls + '-marquee-wrap ' + className,\n        style: {\n          overflow: 'hidden'\n        },\n        role: 'marquee'\n      }, React.createElement('div', {\n        ref: function ref(el) {\n          return _this2.textRef = el;\n        },\n        className: prefixCls + '-marquee',\n        style: style\n      }, text));\n    }\n  }, {\n    key: '_startAnimation',\n    value: function _startAnimation() {\n      var _this3 = this;\n\n      if (this._marqueeTimer) {\n        window.clearTimeout(this._marqueeTimer);\n      }\n\n      var fps = this.props.fps;\n      var TIMEOUT = 1 / fps * 1000;\n      var isLeading = this.state.animatedWidth === 0;\n      var timeout = isLeading ? this.props.leading : TIMEOUT;\n\n      var animate = function animate() {\n        var overflowWidth = _this3.state.overflowWidth;\n        var animatedWidth = _this3.state.animatedWidth + 1;\n        var isRoundOver = animatedWidth > overflowWidth;\n\n        if (isRoundOver) {\n          if (_this3.props.loop) {\n            animatedWidth = 0;\n          } else {\n            return;\n          }\n        }\n\n        if (isRoundOver && _this3.props.trailing) {\n          _this3._marqueeTimer = window.setTimeout(function () {\n            _this3.setState({\n              animatedWidth: animatedWidth\n            });\n\n            _this3._marqueeTimer = window.setTimeout(animate, TIMEOUT);\n          }, _this3.props.trailing);\n        } else {\n          _this3.setState({\n            animatedWidth: animatedWidth\n          });\n\n          _this3._marqueeTimer = window.setTimeout(animate, TIMEOUT);\n        }\n      };\n\n      if (this.state.overflowWidth !== 0) {\n        this._marqueeTimer = window.setTimeout(animate, timeout);\n      }\n    }\n  }, {\n    key: '_measureText',\n    value: function _measureText() {\n      var container = ReactDOM.findDOMNode(this);\n      var node = this.textRef;\n\n      if (container && node) {\n        var containerWidth = container.offsetWidth;\n        var textWidth = node.offsetWidth;\n        var overflowWidth = textWidth - containerWidth;\n\n        if (overflowWidth !== this.state.overflowWidth) {\n          this.setState({\n            overflowWidth: overflowWidth\n          });\n        }\n      }\n    }\n  }]);\n\n  return Marquee;\n}(React.Component);\n\nexport default Marquee;\nMarquee.defaultProps = {\n  text: '',\n  loop: false,\n  leading: 500,\n  trailing: 800,\n  fps: 40,\n  className: ''\n};","map":{"version":3,"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","ReactDOM","Marquee","_React$Component","_this","__proto__","Object","getPrototypeOf","apply","arguments","state","animatedWidth","overflowWidth","key","value","componentDidMount","_measureText","_startAnimation","componentDidUpdate","_marqueeTimer","componentWillUnmount","clearTimeout","render","_this2","_props","props","prefixCls","className","text","style","position","right","whiteSpace","display","createElement","overflow","role","ref","el","textRef","_this3","window","fps","TIMEOUT","isLeading","timeout","leading","animate","isRoundOver","loop","trailing","setTimeout","setState","container","findDOMNode","node","containerWidth","offsetWidth","textWidth","Component","defaultProps"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/node_modules/antd-mobile-v2/es/notice-bar/Marquee.js"],"sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n/*\n * https://github.com/jasonslyvia/react-marquee\n * remove PC\n * support React Element for text prop\n*/\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nvar Marquee = function (_React$Component) {\n    _inherits(Marquee, _React$Component);\n\n    function Marquee() {\n        _classCallCheck(this, Marquee);\n\n        var _this = _possibleConstructorReturn(this, (Marquee.__proto__ || Object.getPrototypeOf(Marquee)).apply(this, arguments));\n\n        _this.state = {\n            animatedWidth: 0,\n            overflowWidth: 0\n        };\n        return _this;\n    }\n\n    _createClass(Marquee, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this._measureText();\n            this._startAnimation();\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            this._measureText();\n            if (!this._marqueeTimer) {\n                this._startAnimation();\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            clearTimeout(this._marqueeTimer);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props = this.props,\n                prefixCls = _props.prefixCls,\n                className = _props.className,\n                text = _props.text;\n\n            var style = _extends({ position: 'relative', right: this.state.animatedWidth, whiteSpace: 'nowrap', display: 'inline-block' }, this.props.style);\n            return React.createElement(\n                'div',\n                { className: prefixCls + '-marquee-wrap ' + className, style: { overflow: 'hidden' }, role: 'marquee' },\n                React.createElement(\n                    'div',\n                    { ref: function ref(el) {\n                            return _this2.textRef = el;\n                        }, className: prefixCls + '-marquee', style: style },\n                    text\n                )\n            );\n        }\n    }, {\n        key: '_startAnimation',\n        value: function _startAnimation() {\n            var _this3 = this;\n\n            if (this._marqueeTimer) {\n                window.clearTimeout(this._marqueeTimer);\n            }\n            var fps = this.props.fps;\n            var TIMEOUT = 1 / fps * 1000;\n            var isLeading = this.state.animatedWidth === 0;\n            var timeout = isLeading ? this.props.leading : TIMEOUT;\n            var animate = function animate() {\n                var overflowWidth = _this3.state.overflowWidth;\n\n                var animatedWidth = _this3.state.animatedWidth + 1;\n                var isRoundOver = animatedWidth > overflowWidth;\n                if (isRoundOver) {\n                    if (_this3.props.loop) {\n                        animatedWidth = 0;\n                    } else {\n                        return;\n                    }\n                }\n                if (isRoundOver && _this3.props.trailing) {\n                    _this3._marqueeTimer = window.setTimeout(function () {\n                        _this3.setState({\n                            animatedWidth: animatedWidth\n                        });\n                        _this3._marqueeTimer = window.setTimeout(animate, TIMEOUT);\n                    }, _this3.props.trailing);\n                } else {\n                    _this3.setState({\n                        animatedWidth: animatedWidth\n                    });\n                    _this3._marqueeTimer = window.setTimeout(animate, TIMEOUT);\n                }\n            };\n            if (this.state.overflowWidth !== 0) {\n                this._marqueeTimer = window.setTimeout(animate, timeout);\n            }\n        }\n    }, {\n        key: '_measureText',\n        value: function _measureText() {\n            var container = ReactDOM.findDOMNode(this);\n            var node = this.textRef;\n            if (container && node) {\n                var containerWidth = container.offsetWidth;\n                var textWidth = node.offsetWidth;\n                var overflowWidth = textWidth - containerWidth;\n                if (overflowWidth !== this.state.overflowWidth) {\n                    this.setState({\n                        overflowWidth: overflowWidth\n                    });\n                }\n            }\n        }\n    }]);\n\n    return Marquee;\n}(React.Component);\n\nexport default Marquee;\n\nMarquee.defaultProps = {\n    text: '',\n    loop: false,\n    leading: 500,\n    trailing: 800,\n    fps: 40,\n    className: ''\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}