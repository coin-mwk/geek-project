{"ast":null,"code":"import React, { memo, useContext } from 'react';\nimport { FieldContext, useWatch } from 'rc-field-form';\nimport { useUpdate } from 'ahooks';\nimport { useIsomorphicUpdateLayoutEffect } from '../../utils/use-isomorphic-update-layout-effect';\nexport const FormSubscribe = props => {\n  const update = useUpdate();\n  const form = useContext(FieldContext);\n  return React.createElement(React.Fragment, null, props.children(form.getFieldsValue(props.to), form), props.to.map(namePath => React.createElement(Watcher, {\n    key: namePath.toString(),\n    form: form,\n    namePath: namePath,\n    onChange: update\n  })));\n};\nexport const Watcher = memo(props => {\n  const value = useWatch(props.namePath, props.form);\n  useIsomorphicUpdateLayoutEffect(() => {\n    props.onChange();\n  }, [value]);\n  return null;\n});","map":{"version":3,"names":["React","memo","useContext","FieldContext","useWatch","useUpdate","useIsomorphicUpdateLayoutEffect","FormSubscribe","props","update","form","createElement","Fragment","children","getFieldsValue","to","map","namePath","Watcher","key","toString","onChange","value"],"sources":["/Users/tonystark/code/VSCodeProject/react/未命名文件夹/gk-h5/node_modules/antd-mobile/es/components/form/form-subscribe.js"],"sourcesContent":["import React, { memo, useContext } from 'react';\nimport { FieldContext, useWatch } from 'rc-field-form';\nimport { useUpdate } from 'ahooks';\nimport { useIsomorphicUpdateLayoutEffect } from '../../utils/use-isomorphic-update-layout-effect';\nexport const FormSubscribe = props => {\n  const update = useUpdate();\n  const form = useContext(FieldContext);\n  return React.createElement(React.Fragment, null, props.children(form.getFieldsValue(props.to), form), props.to.map(namePath => React.createElement(Watcher, {\n    key: namePath.toString(),\n    form: form,\n    namePath: namePath,\n    onChange: update\n  })));\n};\nexport const Watcher = memo(props => {\n  const value = useWatch(props.namePath, props.form);\n  useIsomorphicUpdateLayoutEffect(() => {\n    props.onChange();\n  }, [value]);\n  return null;\n});"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,IAAhB,EAAsBC,UAAtB,QAAwC,OAAxC;AACA,SAASC,YAAT,EAAuBC,QAAvB,QAAuC,eAAvC;AACA,SAASC,SAAT,QAA0B,QAA1B;AACA,SAASC,+BAAT,QAAgD,iDAAhD;AACA,OAAO,MAAMC,aAAa,GAAGC,KAAK,IAAI;EACpC,MAAMC,MAAM,GAAGJ,SAAS,EAAxB;EACA,MAAMK,IAAI,GAAGR,UAAU,CAACC,YAAD,CAAvB;EACA,OAAOH,KAAK,CAACW,aAAN,CAAoBX,KAAK,CAACY,QAA1B,EAAoC,IAApC,EAA0CJ,KAAK,CAACK,QAAN,CAAeH,IAAI,CAACI,cAAL,CAAoBN,KAAK,CAACO,EAA1B,CAAf,EAA8CL,IAA9C,CAA1C,EAA+FF,KAAK,CAACO,EAAN,CAASC,GAAT,CAAaC,QAAQ,IAAIjB,KAAK,CAACW,aAAN,CAAoBO,OAApB,EAA6B;IAC1JC,GAAG,EAAEF,QAAQ,CAACG,QAAT,EADqJ;IAE1JV,IAAI,EAAEA,IAFoJ;IAG1JO,QAAQ,EAAEA,QAHgJ;IAI1JI,QAAQ,EAAEZ;EAJgJ,CAA7B,CAAzB,CAA/F,CAAP;AAMD,CATM;AAUP,OAAO,MAAMS,OAAO,GAAGjB,IAAI,CAACO,KAAK,IAAI;EACnC,MAAMc,KAAK,GAAGlB,QAAQ,CAACI,KAAK,CAACS,QAAP,EAAiBT,KAAK,CAACE,IAAvB,CAAtB;EACAJ,+BAA+B,CAAC,MAAM;IACpCE,KAAK,CAACa,QAAN;EACD,CAF8B,EAE5B,CAACC,KAAD,CAF4B,CAA/B;EAGA,OAAO,IAAP;AACD,CAN0B,CAApB"},"metadata":{},"sourceType":"module"}