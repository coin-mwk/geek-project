{"ast":null,"code":"import React, { forwardRef, useCallback, useMemo } from 'react';\nimport { useMemoizedFn } from 'ahooks';\nimport Picker from '../picker';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { convertDateToStringArray, convertStringArrayToDate, generateDatePickerColumns, defaultRenderLabel } from './date-picker-utils';\nimport { bound } from '../../utils/bound';\nconst thisYear = new Date().getFullYear();\nconst defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day',\n  renderLabel: defaultRenderLabel,\n  defaultValue: null\n};\nexport const DatePicker = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const [value, setValue] = usePropsValue({\n    value: props.value,\n    defaultValue: props.defaultValue,\n    onChange: v => {\n      var _a;\n\n      if (v === null) return;\n      (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(props, v);\n    }\n  });\n  const now = useMemo(() => new Date(), []);\n  const pickerValue = useMemo(() => {\n    let date = value !== null && value !== void 0 ? value : now;\n    date = new Date(bound(date.getTime(), props.min.getTime(), props.max.getTime()));\n    return convertDateToStringArray(date, props.precision);\n  }, [value, props.precision, props.min, props.max]);\n  const onConfirm = useCallback(val => {\n    setValue(convertStringArrayToDate(val, props.precision), true);\n  }, [setValue, props.precision]);\n  const onSelect = useMemoizedFn(val => {\n    var _a;\n\n    const date = convertStringArrayToDate(val, props.precision);\n    (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, date);\n  });\n  const columns = useCallback(selected => generateDatePickerColumns(selected, props.min, props.max, props.precision, props.renderLabel, props.filter), [props.min, props.max, props.precision, props.renderLabel]);\n  return withNativeProps(props, React.createElement(Picker, {\n    ref: ref,\n    columns: columns,\n    value: pickerValue,\n    onCancel: props.onCancel,\n    onClose: props.onClose,\n    closeOnMaskClick: props.closeOnMaskClick,\n    visible: props.visible,\n    confirmText: props.confirmText,\n    cancelText: props.cancelText,\n    onConfirm: onConfirm,\n    onSelect: onSelect,\n    getContainer: props.getContainer,\n    loading: props.loading,\n    loadingContent: props.loadingContent,\n    afterShow: props.afterShow,\n    afterClose: props.afterClose,\n    onClick: props.onClick,\n    title: props.title,\n    stopPropagation: props.stopPropagation,\n    mouseWheel: props.mouseWheel,\n    destroyOnClose: props.destroyOnClose,\n    forceRender: props.forceRender\n  }, (_, actions) => {\n    var _a;\n\n    return (_a = props.children) === null || _a === void 0 ? void 0 : _a.call(props, value, actions);\n  }));\n});","map":{"version":3,"names":["React","forwardRef","useCallback","useMemo","useMemoizedFn","Picker","withNativeProps","mergeProps","usePropsValue","convertDateToStringArray","convertStringArrayToDate","generateDatePickerColumns","defaultRenderLabel","bound","thisYear","Date","getFullYear","defaultProps","min","setFullYear","max","precision","renderLabel","defaultValue","DatePicker","p","ref","props","value","setValue","onChange","v","_a","onConfirm","call","now","pickerValue","date","getTime","val","onSelect","columns","selected","filter","createElement","onCancel","onClose","closeOnMaskClick","visible","confirmText","cancelText","getContainer","loading","loadingContent","afterShow","afterClose","onClick","title","stopPropagation","mouseWheel","destroyOnClose","forceRender","_","actions","children"],"sources":["/Users/tonystark/code/VSCodeProject/react/未命名文件夹/gk-h5/node_modules/antd-mobile/es/components/date-picker/date-picker.js"],"sourcesContent":["import React, { forwardRef, useCallback, useMemo } from 'react';\nimport { useMemoizedFn } from 'ahooks';\nimport Picker from '../picker';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { convertDateToStringArray, convertStringArrayToDate, generateDatePickerColumns, defaultRenderLabel } from './date-picker-utils';\nimport { bound } from '../../utils/bound';\nconst thisYear = new Date().getFullYear();\nconst defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day',\n  renderLabel: defaultRenderLabel,\n  defaultValue: null\n};\nexport const DatePicker = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const [value, setValue] = usePropsValue({\n    value: props.value,\n    defaultValue: props.defaultValue,\n    onChange: v => {\n      var _a;\n\n      if (v === null) return;\n      (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(props, v);\n    }\n  });\n  const now = useMemo(() => new Date(), []);\n  const pickerValue = useMemo(() => {\n    let date = value !== null && value !== void 0 ? value : now;\n    date = new Date(bound(date.getTime(), props.min.getTime(), props.max.getTime()));\n    return convertDateToStringArray(date, props.precision);\n  }, [value, props.precision, props.min, props.max]);\n  const onConfirm = useCallback(val => {\n    setValue(convertStringArrayToDate(val, props.precision), true);\n  }, [setValue, props.precision]);\n  const onSelect = useMemoizedFn(val => {\n    var _a;\n\n    const date = convertStringArrayToDate(val, props.precision);\n    (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, date);\n  });\n  const columns = useCallback(selected => generateDatePickerColumns(selected, props.min, props.max, props.precision, props.renderLabel, props.filter), [props.min, props.max, props.precision, props.renderLabel]);\n  return withNativeProps(props, React.createElement(Picker, {\n    ref: ref,\n    columns: columns,\n    value: pickerValue,\n    onCancel: props.onCancel,\n    onClose: props.onClose,\n    closeOnMaskClick: props.closeOnMaskClick,\n    visible: props.visible,\n    confirmText: props.confirmText,\n    cancelText: props.cancelText,\n    onConfirm: onConfirm,\n    onSelect: onSelect,\n    getContainer: props.getContainer,\n    loading: props.loading,\n    loadingContent: props.loadingContent,\n    afterShow: props.afterShow,\n    afterClose: props.afterClose,\n    onClick: props.onClick,\n    title: props.title,\n    stopPropagation: props.stopPropagation,\n    mouseWheel: props.mouseWheel,\n    destroyOnClose: props.destroyOnClose,\n    forceRender: props.forceRender\n  }, (_, actions) => {\n    var _a;\n\n    return (_a = props.children) === null || _a === void 0 ? void 0 : _a.call(props, value, actions);\n  }));\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}