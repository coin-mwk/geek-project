{"ast":null,"code":"import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n/* tslint:disable:no-bitwise */\n\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport TouchFeedback from 'rmc-feedback';\nimport Flex from '../flex';\n\nfunction noop() {}\n\nvar ImagePicker = function (_React$Component) {\n  _inherits(ImagePicker, _React$Component);\n\n  function ImagePicker() {\n    _classCallCheck(this, ImagePicker); // http://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side\n\n\n    var _this = _possibleConstructorReturn(this, (ImagePicker.__proto__ || Object.getPrototypeOf(ImagePicker)).apply(this, arguments));\n\n    _this.getOrientation = function (file, callback) {\n      var reader = new FileReader();\n\n      reader.onload = function (e) {\n        var view = new DataView(e.target.result);\n\n        if (view.getUint16(0, false) !== 0xffd8) {\n          return callback(-2);\n        }\n\n        var length = view.byteLength;\n        var offset = 2;\n\n        while (offset < length) {\n          var marker = view.getUint16(offset, false);\n          offset += 2;\n\n          if (marker === 0xffe1) {\n            var tmp = view.getUint32(offset += 2, false);\n\n            if (tmp !== 0x45786966) {\n              return callback(-1);\n            }\n\n            var little = view.getUint16(offset += 6, false) === 0x4949;\n            offset += view.getUint32(offset + 4, little);\n            var tags = view.getUint16(offset, little);\n            offset += 2;\n\n            for (var i = 0; i < tags; i++) {\n              if (view.getUint16(offset + i * 12, little) === 0x0112) {\n                return callback(view.getUint16(offset + i * 12 + 8, little));\n              }\n            }\n          } else if ((marker & 0xff00) !== 0xff00) {\n            break;\n          } else {\n            offset += view.getUint16(offset, false);\n          }\n        }\n\n        return callback(-1);\n      };\n\n      reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n    };\n\n    _this.getRotation = function () {\n      var orientation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var imgRotation = 0;\n\n      switch (orientation) {\n        case 3:\n          imgRotation = 180;\n          break;\n\n        case 6:\n          imgRotation = 90;\n          break;\n\n        case 8:\n          imgRotation = 270;\n          break;\n\n        default:\n      }\n\n      return imgRotation;\n    };\n\n    _this.removeImage = function (index) {\n      var newImages = [];\n      var _this$props$files = _this.props.files,\n          files = _this$props$files === undefined ? [] : _this$props$files;\n      files.forEach(function (image, idx) {\n        if (index !== idx) {\n          newImages.push(image);\n        }\n      });\n\n      if (_this.props.onChange) {\n        _this.props.onChange(newImages, 'remove', index);\n      }\n    };\n\n    _this.addImage = function (imgItem) {\n      var _this$props$files2 = _this.props.files,\n          files = _this$props$files2 === undefined ? [] : _this$props$files2;\n      var newImages = files.concat(imgItem);\n\n      if (_this.props.onChange) {\n        _this.props.onChange(newImages, 'add');\n      }\n    };\n\n    _this.onImageClick = function (index) {\n      if (_this.props.onImageClick) {\n        _this.props.onImageClick(index, _this.props.files);\n      }\n    };\n\n    _this.onFileChange = function () {\n      var fileSelectorEl = _this.fileSelectorInput;\n\n      if (fileSelectorEl && fileSelectorEl.files && fileSelectorEl.files.length) {\n        var files = fileSelectorEl.files;\n        var imageParsePromiseList = [];\n\n        for (var i = 0; i < files.length; i++) {\n          imageParsePromiseList.push(_this.parseFile(files[i], i));\n        }\n\n        Promise.all(imageParsePromiseList).then(function (imageItems) {\n          return _this.addImage(imageItems);\n        })['catch'](function (error) {\n          if (_this.props.onFail) {\n            _this.props.onFail(error);\n          }\n        });\n      }\n\n      if (fileSelectorEl) {\n        fileSelectorEl.value = '';\n      }\n    };\n\n    _this.parseFile = function (file, index) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n\n        reader.onload = function (e) {\n          var dataURL = e.target.result;\n\n          if (!dataURL) {\n            reject('Fail to get the ' + index + ' image');\n            return;\n          }\n\n          var orientation = 1;\n\n          _this.getOrientation(file, function (res) {\n            // -2: not jpeg , -1: not defined\n            if (res > 0) {\n              orientation = res;\n            }\n\n            resolve({\n              url: dataURL,\n              orientation: orientation,\n              file: file\n            });\n          });\n        };\n\n        reader.readAsDataURL(file);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ImagePicker, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          style = _props.style,\n          className = _props.className,\n          _props$files = _props.files,\n          files = _props$files === undefined ? [] : _props$files,\n          selectable = _props.selectable,\n          onAddImageClick = _props.onAddImageClick,\n          multiple = _props.multiple,\n          accept = _props.accept,\n          capture = _props.capture,\n          disableDelete = _props.disableDelete;\n      var imgItemList = [];\n      var count = parseInt('' + this.props.length, 10);\n\n      if (count <= 0) {\n        count = 4;\n      }\n\n      var wrapCls = classnames('' + prefixCls, className);\n      files.forEach(function (image, index) {\n        var imgStyle = {\n          backgroundImage: 'url(\"' + image.url + '\")',\n          transform: 'rotate(' + _this2.getRotation(image.orientation) + 'deg)'\n        };\n        var itemStyle = {};\n        imgItemList.push(React.createElement(Flex.Item, {\n          key: 'item-' + index,\n          style: itemStyle\n        }, React.createElement('div', {\n          key: index,\n          className: prefixCls + '-item'\n        }, !disableDelete && React.createElement('div', {\n          className: prefixCls + '-item-remove',\n          role: 'button',\n          'aria-label': 'Click and Remove this image' // tslint:disable-next-line:jsx-no-multiline-js\n          ,\n          onClick: function onClick() {\n            _this2.removeImage(index);\n          }\n        }), React.createElement('div', {\n          className: prefixCls + '-item-content',\n          role: 'button',\n          'aria-label': 'Image can be clicked' // tslint:disable-next-line:jsx-no-multiline-js\n          ,\n          onClick: function onClick() {\n            _this2.onImageClick(index);\n          },\n          style: imgStyle\n        }))));\n      });\n      var selectEl = React.createElement(Flex.Item, {\n        key: 'select'\n      }, React.createElement(TouchFeedback, {\n        activeClassName: prefixCls + '-upload-btn-active'\n      }, React.createElement('div', {\n        className: prefixCls + '-item ' + prefixCls + '-upload-btn',\n        onClick: onAddImageClick,\n        role: 'button',\n        'aria-label': 'Choose and add image'\n      }, React.createElement('input', {\n        ref: function ref(input) {\n          if (input) {\n            _this2.fileSelectorInput = input;\n          }\n        },\n        type: 'file',\n        accept: accept // tslint:disable-next-line:jsx-no-multiline-js\n        ,\n        onChange: function onChange() {\n          _this2.onFileChange();\n        },\n        multiple: multiple,\n        capture: capture\n      }))));\n      var allEl = selectable ? imgItemList.concat([selectEl]) : imgItemList;\n      var length = allEl.length;\n\n      if (length !== 0 && length % count !== 0) {\n        var blankCount = count - length % count;\n        var fillBlankEl = [];\n\n        for (var i = 0; i < blankCount; i++) {\n          fillBlankEl.push(React.createElement(Flex.Item, {\n            key: 'blank-' + i\n          }));\n        }\n\n        allEl = allEl.concat(fillBlankEl);\n      }\n\n      var flexEl = [];\n\n      for (var _i = 0; _i < allEl.length / count; _i++) {\n        var rowEl = allEl.slice(_i * count, _i * count + count);\n        flexEl.push(rowEl);\n      }\n\n      var renderEl = flexEl.map(function (item, index) {\n        return React.createElement(Flex, {\n          key: 'flex-' + index\n        }, item);\n      });\n      return React.createElement('div', {\n        className: wrapCls,\n        style: style\n      }, React.createElement('div', {\n        className: prefixCls + '-list',\n        role: 'group'\n      }, renderEl));\n    }\n  }]);\n\n  return ImagePicker;\n}(React.Component);\n\nexport default ImagePicker;\nImagePicker.defaultProps = {\n  prefixCls: 'am-image-picker',\n  files: [],\n  onChange: noop,\n  onImageClick: noop,\n  onAddImageClick: noop,\n  onFail: noop,\n  selectable: true,\n  multiple: false,\n  accept: 'image/*',\n  length: 4,\n  disableDelete: false\n};","map":{"version":3,"names":["_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","classnames","React","TouchFeedback","Flex","noop","ImagePicker","_React$Component","_this","__proto__","Object","getPrototypeOf","apply","arguments","getOrientation","file","callback","reader","FileReader","onload","e","view","DataView","target","result","getUint16","length","byteLength","offset","marker","tmp","getUint32","little","tags","i","readAsArrayBuffer","slice","getRotation","orientation","undefined","imgRotation","removeImage","index","newImages","_this$props$files","props","files","forEach","image","idx","push","onChange","addImage","imgItem","_this$props$files2","concat","onImageClick","onFileChange","fileSelectorEl","fileSelectorInput","imageParsePromiseList","parseFile","Promise","all","then","imageItems","error","onFail","value","resolve","reject","dataURL","res","url","readAsDataURL","key","render","_this2","_props","prefixCls","style","className","_props$files","selectable","onAddImageClick","multiple","accept","capture","disableDelete","imgItemList","count","parseInt","wrapCls","imgStyle","backgroundImage","transform","itemStyle","createElement","Item","role","onClick","selectEl","activeClassName","ref","input","type","allEl","blankCount","fillBlankEl","flexEl","_i","rowEl","renderEl","map","item","Component","defaultProps"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/node_modules/antd-mobile-v2/es/image-picker/index.js"],"sourcesContent":["import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n/* tslint:disable:no-bitwise */\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport TouchFeedback from 'rmc-feedback';\nimport Flex from '../flex';\nfunction noop() {}\n\nvar ImagePicker = function (_React$Component) {\n    _inherits(ImagePicker, _React$Component);\n\n    function ImagePicker() {\n        _classCallCheck(this, ImagePicker);\n\n        // http://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side\n        var _this = _possibleConstructorReturn(this, (ImagePicker.__proto__ || Object.getPrototypeOf(ImagePicker)).apply(this, arguments));\n\n        _this.getOrientation = function (file, callback) {\n            var reader = new FileReader();\n            reader.onload = function (e) {\n                var view = new DataView(e.target.result);\n                if (view.getUint16(0, false) !== 0xffd8) {\n                    return callback(-2);\n                }\n                var length = view.byteLength;\n                var offset = 2;\n                while (offset < length) {\n                    var marker = view.getUint16(offset, false);\n                    offset += 2;\n                    if (marker === 0xffe1) {\n                        var tmp = view.getUint32(offset += 2, false);\n                        if (tmp !== 0x45786966) {\n                            return callback(-1);\n                        }\n                        var little = view.getUint16(offset += 6, false) === 0x4949;\n                        offset += view.getUint32(offset + 4, little);\n                        var tags = view.getUint16(offset, little);\n                        offset += 2;\n                        for (var i = 0; i < tags; i++) {\n                            if (view.getUint16(offset + i * 12, little) === 0x0112) {\n                                return callback(view.getUint16(offset + i * 12 + 8, little));\n                            }\n                        }\n                    } else if ((marker & 0xff00) !== 0xff00) {\n                        break;\n                    } else {\n                        offset += view.getUint16(offset, false);\n                    }\n                }\n                return callback(-1);\n            };\n            reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n        };\n        _this.getRotation = function () {\n            var orientation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n            var imgRotation = 0;\n            switch (orientation) {\n                case 3:\n                    imgRotation = 180;\n                    break;\n                case 6:\n                    imgRotation = 90;\n                    break;\n                case 8:\n                    imgRotation = 270;\n                    break;\n                default:\n            }\n            return imgRotation;\n        };\n        _this.removeImage = function (index) {\n            var newImages = [];\n            var _this$props$files = _this.props.files,\n                files = _this$props$files === undefined ? [] : _this$props$files;\n\n            files.forEach(function (image, idx) {\n                if (index !== idx) {\n                    newImages.push(image);\n                }\n            });\n            if (_this.props.onChange) {\n                _this.props.onChange(newImages, 'remove', index);\n            }\n        };\n        _this.addImage = function (imgItem) {\n            var _this$props$files2 = _this.props.files,\n                files = _this$props$files2 === undefined ? [] : _this$props$files2;\n\n            var newImages = files.concat(imgItem);\n            if (_this.props.onChange) {\n                _this.props.onChange(newImages, 'add');\n            }\n        };\n        _this.onImageClick = function (index) {\n            if (_this.props.onImageClick) {\n                _this.props.onImageClick(index, _this.props.files);\n            }\n        };\n        _this.onFileChange = function () {\n            var fileSelectorEl = _this.fileSelectorInput;\n            if (fileSelectorEl && fileSelectorEl.files && fileSelectorEl.files.length) {\n                var files = fileSelectorEl.files;\n                var imageParsePromiseList = [];\n                for (var i = 0; i < files.length; i++) {\n                    imageParsePromiseList.push(_this.parseFile(files[i], i));\n                }\n                Promise.all(imageParsePromiseList).then(function (imageItems) {\n                    return _this.addImage(imageItems);\n                })['catch'](function (error) {\n                    if (_this.props.onFail) {\n                        _this.props.onFail(error);\n                    }\n                });\n            }\n            if (fileSelectorEl) {\n                fileSelectorEl.value = '';\n            }\n        };\n        _this.parseFile = function (file, index) {\n            return new Promise(function (resolve, reject) {\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                    var dataURL = e.target.result;\n                    if (!dataURL) {\n                        reject('Fail to get the ' + index + ' image');\n                        return;\n                    }\n                    var orientation = 1;\n                    _this.getOrientation(file, function (res) {\n                        // -2: not jpeg , -1: not defined\n                        if (res > 0) {\n                            orientation = res;\n                        }\n                        resolve({\n                            url: dataURL,\n                            orientation: orientation,\n                            file: file\n                        });\n                    });\n                };\n                reader.readAsDataURL(file);\n            });\n        };\n        return _this;\n    }\n\n    _createClass(ImagePicker, [{\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props = this.props,\n                prefixCls = _props.prefixCls,\n                style = _props.style,\n                className = _props.className,\n                _props$files = _props.files,\n                files = _props$files === undefined ? [] : _props$files,\n                selectable = _props.selectable,\n                onAddImageClick = _props.onAddImageClick,\n                multiple = _props.multiple,\n                accept = _props.accept,\n                capture = _props.capture,\n                disableDelete = _props.disableDelete;\n\n            var imgItemList = [];\n            var count = parseInt('' + this.props.length, 10);\n            if (count <= 0) {\n                count = 4;\n            }\n            var wrapCls = classnames('' + prefixCls, className);\n            files.forEach(function (image, index) {\n                var imgStyle = {\n                    backgroundImage: 'url(\"' + image.url + '\")',\n                    transform: 'rotate(' + _this2.getRotation(image.orientation) + 'deg)'\n                };\n                var itemStyle = {};\n                imgItemList.push(React.createElement(\n                    Flex.Item,\n                    { key: 'item-' + index, style: itemStyle },\n                    React.createElement(\n                        'div',\n                        { key: index, className: prefixCls + '-item' },\n                        !disableDelete && React.createElement('div', { className: prefixCls + '-item-remove', role: 'button', 'aria-label': 'Click and Remove this image'\n                            // tslint:disable-next-line:jsx-no-multiline-js\n                            , onClick: function onClick() {\n                                _this2.removeImage(index);\n                            } }),\n                        React.createElement('div', { className: prefixCls + '-item-content', role: 'button', 'aria-label': 'Image can be clicked'\n                            // tslint:disable-next-line:jsx-no-multiline-js\n                            , onClick: function onClick() {\n                                _this2.onImageClick(index);\n                            }, style: imgStyle })\n                    )\n                ));\n            });\n            var selectEl = React.createElement(\n                Flex.Item,\n                { key: 'select' },\n                React.createElement(\n                    TouchFeedback,\n                    { activeClassName: prefixCls + '-upload-btn-active' },\n                    React.createElement(\n                        'div',\n                        { className: prefixCls + '-item ' + prefixCls + '-upload-btn', onClick: onAddImageClick, role: 'button', 'aria-label': 'Choose and add image' },\n                        React.createElement('input', { ref: function ref(input) {\n                                if (input) {\n                                    _this2.fileSelectorInput = input;\n                                }\n                            }, type: 'file', accept: accept\n                            // tslint:disable-next-line:jsx-no-multiline-js\n                            , onChange: function onChange() {\n                                _this2.onFileChange();\n                            }, multiple: multiple, capture: capture })\n                    )\n                )\n            );\n            var allEl = selectable ? imgItemList.concat([selectEl]) : imgItemList;\n            var length = allEl.length;\n            if (length !== 0 && length % count !== 0) {\n                var blankCount = count - length % count;\n                var fillBlankEl = [];\n                for (var i = 0; i < blankCount; i++) {\n                    fillBlankEl.push(React.createElement(Flex.Item, { key: 'blank-' + i }));\n                }\n                allEl = allEl.concat(fillBlankEl);\n            }\n            var flexEl = [];\n            for (var _i = 0; _i < allEl.length / count; _i++) {\n                var rowEl = allEl.slice(_i * count, _i * count + count);\n                flexEl.push(rowEl);\n            }\n            var renderEl = flexEl.map(function (item, index) {\n                return React.createElement(\n                    Flex,\n                    { key: 'flex-' + index },\n                    item\n                );\n            });\n            return React.createElement(\n                'div',\n                { className: wrapCls, style: style },\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-list', role: 'group' },\n                    renderEl\n                )\n            );\n        }\n    }]);\n\n    return ImagePicker;\n}(React.Component);\n\nexport default ImagePicker;\n\nImagePicker.defaultProps = {\n    prefixCls: 'am-image-picker',\n    files: [],\n    onChange: noop,\n    onImageClick: noop,\n    onAddImageClick: noop,\n    onFail: noop,\n    selectable: true,\n    multiple: false,\n    accept: 'image/*',\n    length: 4,\n    disableDelete: false\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}