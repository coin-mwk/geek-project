{"ast":null,"code":"import React, { useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useThrottleFn } from 'ahooks';\nconst classPrefix = `adm-scroll-mask`;\nexport const ScrollMask = props => {\n  const maskRef = useRef(null);\n  const [{\n    leftMaskOpacity,\n    rightMaskOpacity\n  }, api] = useSpring(() => ({\n    leftMaskOpacity: 0,\n    rightMaskOpacity: 0,\n    config: {\n      clamp: true\n    }\n  }));\n  const {\n    run: updateMask\n  } = useThrottleFn(function () {\n    let immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    const mask = maskRef.current;\n    if (!mask) return;\n    const scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    const scrollLeft = scrollEl.scrollLeft;\n    const showLeftMask = scrollLeft > 0;\n    const showRightMask = scrollLeft + scrollEl.offsetWidth < scrollEl.scrollWidth;\n    api.start({\n      leftMaskOpacity: showLeftMask ? 1 : 0,\n      rightMaskOpacity: showRightMask ? 1 : 0,\n      immediate\n    });\n  }, {\n    wait: 100,\n    trailing: true,\n    leading: true\n  });\n  useEffect(() => {\n    updateMask(true);\n  }, []);\n  useEffect(() => {\n    const scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    scrollEl.addEventListener('scroll', updateMask);\n    return () => scrollEl.removeEventListener('scroll', updateMask);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(animated.div, {\n    ref: maskRef,\n    className: classNames(classPrefix, `${classPrefix}-left`),\n    style: {\n      opacity: leftMaskOpacity\n    }\n  }), React.createElement(animated.div, {\n    className: classNames(classPrefix, `${classPrefix}-right`),\n    style: {\n      opacity: rightMaskOpacity\n    }\n  }));\n};","map":{"version":3,"names":["React","useRef","useEffect","classNames","animated","useSpring","useThrottleFn","classPrefix","ScrollMask","props","maskRef","leftMaskOpacity","rightMaskOpacity","api","config","clamp","run","updateMask","immediate","mask","current","scrollEl","scrollTrackRef","scrollLeft","showLeftMask","showRightMask","offsetWidth","scrollWidth","start","wait","trailing","leading","addEventListener","removeEventListener","createElement","Fragment","div","ref","className","style","opacity"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/node_modules/antd-mobile/es/components/scroll-mask/scroll-mask.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useThrottleFn } from 'ahooks';\nconst classPrefix = `adm-scroll-mask`;\nexport const ScrollMask = props => {\n  const maskRef = useRef(null);\n  const [{\n    leftMaskOpacity,\n    rightMaskOpacity\n  }, api] = useSpring(() => ({\n    leftMaskOpacity: 0,\n    rightMaskOpacity: 0,\n    config: {\n      clamp: true\n    }\n  }));\n  const {\n    run: updateMask\n  } = useThrottleFn((immediate = false) => {\n    const mask = maskRef.current;\n    if (!mask) return;\n    const scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    const scrollLeft = scrollEl.scrollLeft;\n    const showLeftMask = scrollLeft > 0;\n    const showRightMask = scrollLeft + scrollEl.offsetWidth < scrollEl.scrollWidth;\n    api.start({\n      leftMaskOpacity: showLeftMask ? 1 : 0,\n      rightMaskOpacity: showRightMask ? 1 : 0,\n      immediate\n    });\n  }, {\n    wait: 100,\n    trailing: true,\n    leading: true\n  });\n  useEffect(() => {\n    updateMask(true);\n  }, []);\n  useEffect(() => {\n    const scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    scrollEl.addEventListener('scroll', updateMask);\n    return () => scrollEl.removeEventListener('scroll', updateMask);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(animated.div, {\n    ref: maskRef,\n    className: classNames(classPrefix, `${classPrefix}-left`),\n    style: {\n      opacity: leftMaskOpacity\n    }\n  }), React.createElement(animated.div, {\n    className: classNames(classPrefix, `${classPrefix}-right`),\n    style: {\n      opacity: rightMaskOpacity\n    }\n  }));\n};"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,SAAxB,QAAyC,OAAzC;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,mBAApC;AACA,SAASC,aAAT,QAA8B,QAA9B;AACA,MAAMC,WAAW,GAAI,iBAArB;AACA,OAAO,MAAMC,UAAU,GAAGC,KAAK,IAAI;EACjC,MAAMC,OAAO,GAAGT,MAAM,CAAC,IAAD,CAAtB;EACA,MAAM,CAAC;IACLU,eADK;IAELC;EAFK,CAAD,EAGHC,GAHG,IAGIR,SAAS,CAAC,OAAO;IACzBM,eAAe,EAAE,CADQ;IAEzBC,gBAAgB,EAAE,CAFO;IAGzBE,MAAM,EAAE;MACNC,KAAK,EAAE;IADD;EAHiB,CAAP,CAAD,CAHnB;EAUA,MAAM;IACJC,GAAG,EAAEC;EADD,IAEFX,aAAa,CAAC,YAAuB;IAAA,IAAtBY,SAAsB,uEAAV,KAAU;IACvC,MAAMC,IAAI,GAAGT,OAAO,CAACU,OAArB;IACA,IAAI,CAACD,IAAL,EAAW;IACX,MAAME,QAAQ,GAAGZ,KAAK,CAACa,cAAN,CAAqBF,OAAtC;IACA,IAAI,CAACC,QAAL,EAAe;IACf,MAAME,UAAU,GAAGF,QAAQ,CAACE,UAA5B;IACA,MAAMC,YAAY,GAAGD,UAAU,GAAG,CAAlC;IACA,MAAME,aAAa,GAAGF,UAAU,GAAGF,QAAQ,CAACK,WAAtB,GAAoCL,QAAQ,CAACM,WAAnE;IACAd,GAAG,CAACe,KAAJ,CAAU;MACRjB,eAAe,EAAEa,YAAY,GAAG,CAAH,GAAO,CAD5B;MAERZ,gBAAgB,EAAEa,aAAa,GAAG,CAAH,GAAO,CAF9B;MAGRP;IAHQ,CAAV;EAKD,CAbgB,EAad;IACDW,IAAI,EAAE,GADL;IAEDC,QAAQ,EAAE,IAFT;IAGDC,OAAO,EAAE;EAHR,CAbc,CAFjB;EAoBA7B,SAAS,CAAC,MAAM;IACde,UAAU,CAAC,IAAD,CAAV;EACD,CAFQ,EAEN,EAFM,CAAT;EAGAf,SAAS,CAAC,MAAM;IACd,MAAMmB,QAAQ,GAAGZ,KAAK,CAACa,cAAN,CAAqBF,OAAtC;IACA,IAAI,CAACC,QAAL,EAAe;IACfA,QAAQ,CAACW,gBAAT,CAA0B,QAA1B,EAAoCf,UAApC;IACA,OAAO,MAAMI,QAAQ,CAACY,mBAAT,CAA6B,QAA7B,EAAuChB,UAAvC,CAAb;EACD,CALQ,EAKN,EALM,CAAT;EAMA,OAAOjB,KAAK,CAACkC,aAAN,CAAoBlC,KAAK,CAACmC,QAA1B,EAAoC,IAApC,EAA0CnC,KAAK,CAACkC,aAAN,CAAoB9B,QAAQ,CAACgC,GAA7B,EAAkC;IACjFC,GAAG,EAAE3B,OAD4E;IAEjF4B,SAAS,EAAEnC,UAAU,CAACI,WAAD,EAAe,GAAEA,WAAY,OAA7B,CAF4D;IAGjFgC,KAAK,EAAE;MACLC,OAAO,EAAE7B;IADJ;EAH0E,CAAlC,CAA1C,EAMHX,KAAK,CAACkC,aAAN,CAAoB9B,QAAQ,CAACgC,GAA7B,EAAkC;IACpCE,SAAS,EAAEnC,UAAU,CAACI,WAAD,EAAe,GAAEA,WAAY,QAA7B,CADe;IAEpCgC,KAAK,EAAE;MACLC,OAAO,EAAE5B;IADJ;EAF6B,CAAlC,CANG,CAAP;AAYD,CArDM"},"metadata":{},"sourceType":"module"}