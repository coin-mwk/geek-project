{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport React, { forwardRef, useImperativeHandle, useRef, useState } from 'react';\nimport classNames from 'classnames';\nimport DotLoading from '../dot-loading';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { withNativeProps } from '../../utils/native-props';\nimport { isPromise } from '../../utils/validate';\nconst classPrefix = `adm-button`;\nconst defaultProps = {\n  color: 'default',\n  fill: 'solid',\n  block: false,\n  loading: false,\n  loadingIcon: React.createElement(DotLoading, {\n    color: 'currentColor'\n  }),\n  type: 'button',\n  shape: 'default',\n  size: 'middle'\n};\nexport const Button = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const [innerLoading, setInnerLoading] = useState(false);\n  const nativeButtonRef = useRef(null);\n  const loading = props.loading === 'auto' ? innerLoading : props.loading;\n  const disabled = props.disabled || loading;\n  useImperativeHandle(ref, () => ({\n    get nativeElement() {\n      return nativeButtonRef.current;\n    }\n\n  }));\n\n  const handleClick = e => __awaiter(void 0, void 0, void 0, function* () {\n    if (!props.onClick) return;\n    const promise = props.onClick(e);\n\n    if (isPromise(promise)) {\n      try {\n        setInnerLoading(true);\n        yield promise;\n        setInnerLoading(false);\n      } catch (e) {\n        setInnerLoading(false);\n        throw e;\n      }\n    }\n  });\n\n  return withNativeProps(props, React.createElement(\"button\", {\n    ref: nativeButtonRef,\n    type: props.type,\n    onClick: handleClick,\n    className: classNames(classPrefix, props.color ? `${classPrefix}-${props.color}` : null, {\n      [`${classPrefix}-block`]: props.block,\n      [`${classPrefix}-disabled`]: disabled,\n      [`${classPrefix}-fill-outline`]: props.fill === 'outline',\n      [`${classPrefix}-fill-none`]: props.fill === 'none',\n      [`${classPrefix}-mini`]: props.size === 'mini',\n      [`${classPrefix}-small`]: props.size === 'small',\n      [`${classPrefix}-large`]: props.size === 'large',\n      [`${classPrefix}-loading`]: loading\n    }, `${classPrefix}-shape-${props.shape}`),\n    disabled: disabled,\n    onMouseDown: props.onMouseDown,\n    onMouseUp: props.onMouseUp,\n    onTouchStart: props.onTouchStart,\n    onTouchEnd: props.onTouchEnd\n  }, loading ? React.createElement(\"div\", {\n    className: `${classPrefix}-loading-wrapper`\n  }, props.loadingIcon, props.loadingText) : React.createElement(\"span\", null, props.children)));\n});","map":{"version":3,"names":["__awaiter","React","forwardRef","useImperativeHandle","useRef","useState","classNames","DotLoading","mergeProps","withNativeProps","isPromise","classPrefix","defaultProps","color","fill","block","loading","loadingIcon","createElement","type","shape","size","Button","p","ref","props","innerLoading","setInnerLoading","nativeButtonRef","disabled","nativeElement","current","handleClick","e","onClick","promise","className","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","loadingText","children"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/node_modules/antd-mobile/es/components/button/button.js"],"sourcesContent":["import { __awaiter } from \"tslib\";\nimport React, { forwardRef, useImperativeHandle, useRef, useState } from 'react';\nimport classNames from 'classnames';\nimport DotLoading from '../dot-loading';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { withNativeProps } from '../../utils/native-props';\nimport { isPromise } from '../../utils/validate';\nconst classPrefix = `adm-button`;\nconst defaultProps = {\n  color: 'default',\n  fill: 'solid',\n  block: false,\n  loading: false,\n  loadingIcon: React.createElement(DotLoading, {\n    color: 'currentColor'\n  }),\n  type: 'button',\n  shape: 'default',\n  size: 'middle'\n};\nexport const Button = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const [innerLoading, setInnerLoading] = useState(false);\n  const nativeButtonRef = useRef(null);\n  const loading = props.loading === 'auto' ? innerLoading : props.loading;\n  const disabled = props.disabled || loading;\n  useImperativeHandle(ref, () => ({\n    get nativeElement() {\n      return nativeButtonRef.current;\n    }\n  }));\n  const handleClick = e => __awaiter(void 0, void 0, void 0, function* () {\n    if (!props.onClick) return;\n    const promise = props.onClick(e);\n    if (isPromise(promise)) {\n      try {\n        setInnerLoading(true);\n        yield promise;\n        setInnerLoading(false);\n      } catch (e) {\n        setInnerLoading(false);\n        throw e;\n      }\n    }\n  });\n  return withNativeProps(props, React.createElement(\"button\", {\n    ref: nativeButtonRef,\n    type: props.type,\n    onClick: handleClick,\n    className: classNames(classPrefix, props.color ? `${classPrefix}-${props.color}` : null, {\n      [`${classPrefix}-block`]: props.block,\n      [`${classPrefix}-disabled`]: disabled,\n      [`${classPrefix}-fill-outline`]: props.fill === 'outline',\n      [`${classPrefix}-fill-none`]: props.fill === 'none',\n      [`${classPrefix}-mini`]: props.size === 'mini',\n      [`${classPrefix}-small`]: props.size === 'small',\n      [`${classPrefix}-large`]: props.size === 'large',\n      [`${classPrefix}-loading`]: loading\n    }, `${classPrefix}-shape-${props.shape}`),\n    disabled: disabled,\n    onMouseDown: props.onMouseDown,\n    onMouseUp: props.onMouseUp,\n    onTouchStart: props.onTouchStart,\n    onTouchEnd: props.onTouchEnd\n  }, loading ? React.createElement(\"div\", {\n    className: `${classPrefix}-loading-wrapper`\n  }, props.loadingIcon, props.loadingText) : React.createElement(\"span\", null, props.children)));\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}