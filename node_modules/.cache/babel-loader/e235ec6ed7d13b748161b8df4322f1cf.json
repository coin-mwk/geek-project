{"ast":null,"code":"import React, { forwardRef, useImperativeHandle, useRef, useState, useCallback } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport SafeArea from '../safe-area';\nimport { Slide } from './slide';\nimport { Slides } from './slides';\nconst classPrefix = `adm-image-viewer`;\nconst defaultProps = {\n  maxZoom: 3,\n  getContainer: null,\n  visible: false\n};\nexport const ImageViewer = p => {\n  var _a;\n\n  const props = mergeProps(defaultProps, p);\n  const node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose,\n    destroyOnClose: true\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.image && React.createElement(Slide, {\n    image: props.image,\n    onTap: () => {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })), props.image && React.createElement(\"div\", {\n    className: `${classPrefix}-footer`\n  }, (_a = props.renderFooter) === null || _a === void 0 ? void 0 : _a.call(props, props.image), React.createElement(SafeArea, {\n    position: 'bottom'\n  })));\n  return renderToContainer(props.getContainer, node);\n};\nconst multiDefaultProps = Object.assign(Object.assign({}, defaultProps), {\n  defaultIndex: 0\n});\nexport const MultiImageViewer = forwardRef((p, ref) => {\n  var _a;\n\n  const props = mergeProps(multiDefaultProps, p);\n  const [index, setIndex] = useState(props.defaultIndex);\n  const slidesRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    swipeTo: (index, immediate) => {\n      var _a;\n\n      setIndex(index);\n      (_a = slidesRef.current) === null || _a === void 0 ? void 0 : _a.swipeTo(index, immediate);\n    }\n  }));\n  const onSlideChange = useCallback(index => {\n    var _a;\n\n    setIndex(index);\n    (_a = props.onIndexChange) === null || _a === void 0 ? void 0 : _a.call(props, index);\n  }, [props.onIndexChange]);\n  const node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose,\n    destroyOnClose: true\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.images && React.createElement(Slides, {\n    ref: slidesRef,\n    defaultIndex: index,\n    onIndexChange: onSlideChange,\n    images: props.images,\n    onTap: () => {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })), props.images && React.createElement(\"div\", {\n    className: `${classPrefix}-footer`\n  }, (_a = props.renderFooter) === null || _a === void 0 ? void 0 : _a.call(props, props.images[index], index), React.createElement(SafeArea, {\n    position: 'bottom'\n  })));\n  return renderToContainer(props.getContainer, node);\n});","map":{"version":3,"names":["React","forwardRef","useImperativeHandle","useRef","useState","useCallback","mergeProps","renderToContainer","Mask","SafeArea","Slide","Slides","classPrefix","defaultProps","maxZoom","getContainer","visible","ImageViewer","p","_a","props","node","createElement","disableBodyScroll","opacity","afterClose","destroyOnClose","className","image","onTap","onClose","call","renderFooter","position","multiDefaultProps","Object","assign","defaultIndex","MultiImageViewer","ref","index","setIndex","slidesRef","swipeTo","immediate","current","onSlideChange","onIndexChange","images"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/node_modules/antd-mobile/es/components/image-viewer/image-viewer.js"],"sourcesContent":["import React, { forwardRef, useImperativeHandle, useRef, useState, useCallback } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport SafeArea from '../safe-area';\nimport { Slide } from './slide';\nimport { Slides } from './slides';\nconst classPrefix = `adm-image-viewer`;\nconst defaultProps = {\n  maxZoom: 3,\n  getContainer: null,\n  visible: false\n};\nexport const ImageViewer = p => {\n  var _a;\n\n  const props = mergeProps(defaultProps, p);\n  const node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose,\n    destroyOnClose: true\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.image && React.createElement(Slide, {\n    image: props.image,\n    onTap: () => {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })), props.image && React.createElement(\"div\", {\n    className: `${classPrefix}-footer`\n  }, (_a = props.renderFooter) === null || _a === void 0 ? void 0 : _a.call(props, props.image), React.createElement(SafeArea, {\n    position: 'bottom'\n  })));\n  return renderToContainer(props.getContainer, node);\n};\nconst multiDefaultProps = Object.assign(Object.assign({}, defaultProps), {\n  defaultIndex: 0\n});\nexport const MultiImageViewer = forwardRef((p, ref) => {\n  var _a;\n\n  const props = mergeProps(multiDefaultProps, p);\n  const [index, setIndex] = useState(props.defaultIndex);\n  const slidesRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    swipeTo: (index, immediate) => {\n      var _a;\n\n      setIndex(index);\n      (_a = slidesRef.current) === null || _a === void 0 ? void 0 : _a.swipeTo(index, immediate);\n    }\n  }));\n  const onSlideChange = useCallback(index => {\n    var _a;\n\n    setIndex(index);\n    (_a = props.onIndexChange) === null || _a === void 0 ? void 0 : _a.call(props, index);\n  }, [props.onIndexChange]);\n  const node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose,\n    destroyOnClose: true\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.images && React.createElement(Slides, {\n    ref: slidesRef,\n    defaultIndex: index,\n    onIndexChange: onSlideChange,\n    images: props.images,\n    onTap: () => {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })), props.images && React.createElement(\"div\", {\n    className: `${classPrefix}-footer`\n  }, (_a = props.renderFooter) === null || _a === void 0 ? void 0 : _a.call(props, props.images[index], index), React.createElement(SafeArea, {\n    position: 'bottom'\n  })));\n  return renderToContainer(props.getContainer, node);\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}