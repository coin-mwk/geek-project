{"ast":null,"code":"import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport closest from '../_util/closest';\nimport Modal from './Modal';\nexport default function alert(title, message) {\n  var actions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [{\n    text: '确定'\n  }];\n  var platform = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'ios';\n  var closed = false;\n\n  if (!title && !message) {\n    // console.log('Must specify either an alert title, or message, or both');\n    return {\n      close: function close() {}\n    };\n  }\n\n  var div = document.createElement('div');\n  document.body.appendChild(div);\n\n  function close() {\n    ReactDOM.unmountComponentAtNode(div);\n\n    if (div && div.parentNode) {\n      div.parentNode.removeChild(div);\n    }\n  }\n\n  var footer = actions.map(function (button) {\n    // tslint:disable-next-line:only-arrow-functions\n    var orginPress = button.onPress || function () {};\n\n    button.onPress = function () {\n      if (closed) {\n        return;\n      }\n\n      var res = orginPress();\n\n      if (res && res.then) {\n        res.then(function () {\n          closed = true;\n          close();\n        })['catch'](function () {});\n      } else {\n        closed = true;\n        close();\n      }\n    };\n\n    return button;\n  });\n  var prefixCls = 'am-modal';\n\n  function onWrapTouchStart(e) {\n    if (!/iPhone|iPod|iPad/i.test(navigator.userAgent)) {\n      return;\n    }\n\n    var pNode = closest(e.target, '.' + prefixCls + '-footer');\n\n    if (!pNode) {\n      e.preventDefault();\n    }\n  }\n\n  ReactDOM.render(React.createElement(Modal, {\n    visible: true,\n    transparent: true,\n    title: title,\n    transitionName: 'am-zoom',\n    closable: false,\n    maskClosable: false,\n    footer: footer,\n    maskTransitionName: 'am-fade',\n    platform: platform,\n    wrapProps: {\n      onTouchStart: onWrapTouchStart\n    }\n  }, React.createElement('div', {\n    className: prefixCls + '-alert-content'\n  }, message)), div);\n  return {\n    close: close\n  };\n}","map":{"version":3,"names":["React","ReactDOM","closest","Modal","alert","title","message","actions","arguments","length","undefined","text","platform","closed","close","div","document","createElement","body","appendChild","unmountComponentAtNode","parentNode","removeChild","footer","map","button","orginPress","onPress","res","then","prefixCls","onWrapTouchStart","e","test","navigator","userAgent","pNode","target","preventDefault","render","visible","transparent","transitionName","closable","maskClosable","maskTransitionName","wrapProps","onTouchStart","className"],"sources":["/Users/tonystark/code/VSCodeProject/react/gk-h5/node_modules/antd-mobile-v2/es/modal/alert.js"],"sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport closest from '../_util/closest';\nimport Modal from './Modal';\nexport default function alert(title, message) {\n    var actions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [{ text: '确定' }];\n    var platform = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'ios';\n\n    var closed = false;\n    if (!title && !message) {\n        // console.log('Must specify either an alert title, or message, or both');\n        return {\n            close: function close() {}\n        };\n    }\n    var div = document.createElement('div');\n    document.body.appendChild(div);\n    function close() {\n        ReactDOM.unmountComponentAtNode(div);\n        if (div && div.parentNode) {\n            div.parentNode.removeChild(div);\n        }\n    }\n    var footer = actions.map(function (button) {\n        // tslint:disable-next-line:only-arrow-functions\n        var orginPress = button.onPress || function () {};\n        button.onPress = function () {\n            if (closed) {\n                return;\n            }\n            var res = orginPress();\n            if (res && res.then) {\n                res.then(function () {\n                    closed = true;\n                    close();\n                })['catch'](function () {});\n            } else {\n                closed = true;\n                close();\n            }\n        };\n        return button;\n    });\n    var prefixCls = 'am-modal';\n    function onWrapTouchStart(e) {\n        if (!/iPhone|iPod|iPad/i.test(navigator.userAgent)) {\n            return;\n        }\n        var pNode = closest(e.target, '.' + prefixCls + '-footer');\n        if (!pNode) {\n            e.preventDefault();\n        }\n    }\n    ReactDOM.render(React.createElement(\n        Modal,\n        { visible: true, transparent: true, title: title, transitionName: 'am-zoom', closable: false, maskClosable: false, footer: footer, maskTransitionName: 'am-fade', platform: platform, wrapProps: { onTouchStart: onWrapTouchStart } },\n        React.createElement(\n            'div',\n            { className: prefixCls + '-alert-content' },\n            message\n        )\n    ), div);\n    return {\n        close: close\n    };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}